FROM ubuntu:18.04

ARG uid
ARG gid
ARG user
ARG group

RUN groupadd -g $gid $group
RUN useradd $user -u $uid -g $gid

WORKDIR /work
RUN chown -R $user:$group /work

RUN apt-get update && apt-get install -y sudo
RUN echo "$user ALL=(ALL) NOPASSWD:ALL" >> /etc/sudoers

# 必要そうなツールを追加する
RUN apt-get install -y iproute2

# 開発に必要そうなツールを追加する
RUN apt-get install -y \
  vim \
  git \
  tig \
  tmux \
  tree \
  zsh \
  peco \
  exuberant-ctags \
  silversearcher-ag \
  build-essential

# $HOME作成
RUN mkdir -p /home/$user && chown -R $user:$group /home/$user

USER $user
